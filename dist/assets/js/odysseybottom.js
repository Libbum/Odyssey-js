!function(t){function e(t,e){var n="";switch(e){case"date":case"trip":case"big":n=t[e];break;case"country":details=/\d{4}\/\d{2}\/(\w+)/,back=details.exec(t.big),n=back[1];break;case"city":details=/\d{4}\/\d{2}\/\w+\/(\w+)/,back=details.exec(t.big),n=back[1];break;case"filename":details=/\d{4}\/\d{2}\/\w+\/\w+\/(\w+)/,back=details.exec(t.big),n=back[1];break;case"year":details=/(\d{4})\/\d{2}\//,back=details.exec(t.big),n=back[1];break;case"month":details=/\d{4}\/(\d{2})\//,back=details.exec(t.big),n=back[1]}return n}function n(e){e.length>1&&(gallery=t("#gallery"),gallery.fadeTo(750,0,function(){gallery.empty().chromatic(e),gallery.fadeTo(750,1)}))}function a(){return o.filter(function(t){return e(t,c.filterKey)==c.filterProp}).sort(i(c.sortBy))}function r(t){var n=1;return"!"===t[0]&&(n=-1,t=t.substr(1)),function(a,r){left=e(a,t),right=e(r,t);var i=left<right?-1:left>right?1:0;return i*n}}function i(t){return function(e,n){for(var a=0,i=0,o=t.length;0===i&&o>a;)i=r(t[a])(e,n),a++;return i}}skel.breakpoints({shortest:"(max-height: 700px)","short":"(max-height: 880px)",xlarge:"(max-width: 1680px)",large:"(max-width: 1280px)",medium:"(max-width: 1024px)",small:"(max-width: 736px)",xsmall:"(max-width: 480px)"});var o=[],s=[],c={filterKey:"",filterProp:"",sortBy:["!year","!month","!trip","filename"]};!function(){function t(t,e,n){var a=t.translate(),r=Math.atan2(e[1]-a[1],e[0]-a[0])-Math.atan2(n[1]-a[1],n[0]-a[0]);return[Math.cos(r/2),0,0,Math.sin(r/2)]}function e(t,e){var n=t.invert(e);return n&&isFinite(n[0])&&isFinite(n[1])&&s(n)}function n(t){var e=.5*t[0]*d,n=.5*t[1]*d,a=.5*t[2]*d,r=Math.sin(e),i=Math.cos(e),o=Math.sin(n),s=Math.cos(n),c=Math.sin(a),l=Math.cos(a);return[i*s*l+r*o*c,r*s*l-i*o*c,i*o*l+r*s*c,i*s*c-r*o*l]}function a(t,e){var n=t[0],a=t[1],r=t[2],i=t[3],o=e[0],s=e[1],c=e[2],l=e[3];return[n*o-a*s-r*c-i*l,n*s+a*o+r*l-i*c,n*c-a*l+r*o+i*s,n*l+a*c-r*s+i*o]}function r(t,e){if(t&&e){var n=l(t,e),a=Math.sqrt(c(n,n)),r=.5*Math.acos(Math.max(-1,Math.min(1,c(t,e)))),i=Math.sin(r)/a;return a&&[Math.cos(r),n[2]*i,-n[1]*i,n[0]*i]}}function i(t,e){var n=Math.max(-1,Math.min(1,c(t,e))),a=0>n?-1:1,r=Math.acos(a*n),i=Math.sin(r);return i?function(n){var o=a*Math.sin((1-n)*r)/i,s=Math.sin(n*r)/i;return[t[0]*o+e[0]*s,t[1]*o+e[1]*s,t[2]*o+e[2]*s,t[3]*o+e[3]*s]}:function(){return t}}function o(t){return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*h,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*h,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*h]}function s(t){var e=t[0]*d,n=t[1]*d,a=Math.cos(n);return[a*Math.cos(e),a*Math.sin(e),Math.sin(n)]}function c(t,e){var n=t.length-1,a=0;do a+=t[n]*e[n];while(n--);return a}function l(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function u(t){for(var e=0,n=arguments.length,a=[];++e<n;)a.push(arguments[e]);var r=d3.dispatch.apply(null,a);return r.of=function(e,n){return function(a){try{var i=a.sourceEvent=d3.event;a.target=t,d3.event=a,r[a.type].apply(e,n)}finally{d3.event=i}}},r}m=d3.behavior.zoom();var d=Math.PI/180,h=180/Math.PI;d3.geo.zoom=function(){function c(t){v++||t({type:"zoomstart"})}function l(t){t({type:"zoom"})}function d(t){--v||t({type:"zoomend"})}var h,f,p,v=0,g=u(m,"zoomstart","zoom","zoomend");return m.on("zoomstart",function(){var i=d3.mouse(this),s=n(h.rotate()),u=e(h,i);u&&(p=u),M.call(m,"zoom",function(){h.scale(z.k=d3.event.scale);var n=d3.mouse(this),c=r(p,e(h,n));h.rotate(z.r=o(s=c?a(s,c):a(t(h,i,n),s))),i=n,l(g.of(this,arguments))}),c(g.of(this,arguments))}).on("zoomend",function(){M.call(m,"zoom",null),d(g.of(this,arguments))}),M=m.on,z={r:[0,0,0],k:1},m.rotateTo=function(t){var e=r(s(t),s([-z.r[0],-z.r[1]]));return o(a(n(z.r),e))},m.projection=function(t){return arguments.length?(h=t,z={r:h.rotate(),k:h.scale()},m.scale(z.k)):h},m.duration=function(t){return arguments.length?(f=t,m):f},m.event=function(t){t.each(function(){var t=d3.select(this),e=g.of(this,arguments),a=z,r=d3.transition(t);if(r!==t){r.each("start.zoom",function(){this.__chart__&&(z=this.__chart__),h.rotate(z.r).scale(z.k),c(e)}).tween("zoom:zoom",function(){var t=m.size()[0],s=i(n(z.r),n(a.r)),c=d3.geo.distance(z.r,a.r),u=d3.interpolateZoom([0,0,t/z.k],[c,0,t/a.k]);return f&&r.duration(f(.001*u.duration)),function(n){var a=u(n);this.__chart__=z={r:o(s(a[0]/c)),k:t/a[2]},h.rotate(z.r).scale(z.k),m.scale(z.k),l(e)}}).each("end.zoom",function(){d(e)});try{r.each("interrupt.zoom",function(){d(e)})}catch(s){}}else this.__chart__=z,c(e),l(e),d(e)})},d3.rebind(m,g,"on")}}(),function(){function e(t,e,n){var a=e.projection();t.append("path").datum(d3.geo.graticule()).attr("class","iglobe-graticule").attr("d",e),t.append("path").datum({type:"Sphere"}).attr("class","iglobe-foreground").attr("d",e).on("mousedown.grab",function(){var e;n&&(e=t.insert("path",".iglobe-foreground").datum({type:"Point",coordinates:a.invert(d3.mouse(this))}).attr("class","iglobe-point").attr("d",r));var r=d3.select(this).classed("zooming",!0),i=d3.select(window).on("mouseup.grab",function(){r.classed("zooming",!1),i.on("mouseup.grab",null),n&&e.remove()})})}function r(t,e){return d3.geo.orthographic().precision(.5).clipAngle(90).clipExtent([[-1,-1],[t+1,e+1]]).translate([t/2,e/2]).scale(t/2-10)}function l(){function t(t){var e=Math.sin(t*=f)*m,n=Math.sin(f-t)*m,a=n*i+e*d,s=n*o+e*h,c=n*r+e*u;return[Math.atan2(s,a)/b,Math.atan2(c,Math.sqrt(a*a+s*s))/b]}var e,n,a,r,i,o,s,c,l,u,d,h,f,m;return t.distance=function(){return null==f&&(m=1/Math.sin(f=Math.acos(Math.max(-1,Math.min(1,r*u+a*l*Math.cos(s-e)))))),f},t.source=function(s){var c=Math.cos(e=s[0]*b),l=Math.sin(e);return a=Math.cos(n=s[1]*b),r=Math.sin(n),i=a*c,o=a*l,f=null,t},t.target=function(e){var n=Math.cos(s=e[0]*b),a=Math.sin(s);return l=Math.cos(c=e[1]*b),u=Math.sin(c),d=l*n,h=l*a,f=null,t},t}function u(t,e){return"country"==c.filterKey&&d3.selectAll(".iglobe-countries").attr("style",null),d3.selectAll(".iglobe-route").each(function(n,a){n.properties.name==t?(d3.select(this).attr("visibility","visible"),e&&(coords=h(n.geometry.coordinates))):d3.select(this).attr("visibility","hidden")}),e?coords:void 0}function d(t){var e=l();d3.transition().delay(1500).duration(2e3).tween("rotate",function(){e.source(v.rotate()).target(t).distance();var n=d3.interpolate(v.scale(),f/2-10);return function(t){v.rotate(e(t)).scale(n(t)),m.scale(n(t)),d3.select("#map").selectAll("path").attr("d",d3.geo.path().projection(v))}})}function h(t){var e=0,n=0,a=t.length-1;do e+=t[a][0],n+=t[a][1];while(a--);return e/=t.length,n/=t.length,[-e,-n]}var f=400,p=400,v=r(f,p).rotate([-40,-30]),g=d3.dispatch("world"),y=-1,b=Math.PI/180;d3.selectAll("#map").data([v]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+f+" "+p).each(function(t){var n=d3.geo.path().projection(t),a=d3.select(this).call(e,n,!0);a.selectAll(".iglobe-foreground").call(d3.geo.zoom().projection(t).scaleExtent([.7*t.scale(),10*t.scale()]).on("zoom.redraw",function(){d3.event.sourceEvent.preventDefault&&d3.event.sourceEvent.preventDefault(),a.selectAll("path").attr("d",n)})),g.on("world."+ ++y,function(){a.selectAll("path").attr("d",n)})}),t("#navsub").click(function(){if(t("#galSelTrip").is(":checked")){var e=t("#MenuList").val();e!==c.filterProp&&(coords=u(e,!0),c.filterKey="trip",c.filterProp=e,c.sortBy=["!filename","!year","!month"],"!"===c.sortBy[0][0]?(c.sortBy=["!filename","!year","!month"],t("#inv").html('<i class="fa fa-chevron-down"></i>')):(c.sortBy=["filename","!year","!month"],t("#inv").html('<i class="fa fa-chevron-up"></i>')),n(a()),d(coords))}else if(t("#galSelCountry").is(":checked")){for(var e=t("#MenuList").val(),r=0;r<s.length;r++)if(s[r].id==e&&s[r].properties.name!==c.filterProp){var l=d3.geo.path().projection(function(t){return t}).centroid;coords=l(s[r]),u(e,!1),d3.select("#"+e).style("fill","#962d3e"),c.filterKey="country",c.filterProp=s[r].properties.name,"!"===c.sortBy[0][0]?(c.sortBy=["!year","!month","filename"],t("#inv").html('<i class="fa fa-chevron-down"></i>')):(c.sortBy=["year","month","filename"],t("#inv").html('<i class="fa fa-chevron-up"></i>')),n(a()),d([-coords[0],-coords[1]]);break}}else{u("",!1),"!"===c.sortBy[0][0]?(c={filterKey:"",filterProp:"",sortBy:["!year","!month","!trip","filename"]},t("#inv").html('<i class="fa fa-chevron-down"></i>')):(c={filterKey:"",filterProp:"",sortBy:["year","month","!trip","filename"]},t("#inv").html('<i class="fa fa-chevron-up"></i>'));var h=o.sort(i(c.sortBy));n(h),d([-40,-30])}return!1}),t("#inv").click(function(){var e=!1;return"!"===c.sortBy[0][0]?(t(this).html('<i class="fa fa-chevron-up"></i>'),c.sortBy[0]=c.sortBy[0].substr(1),"year"===c.sortBy[0]&&(e=!0)):(t(this).html('<i class="fa fa-chevron-down"></i>'),"year"===c.sortBy[0]&&(e=!0),c.sortBy[0]="!"+c.sortBy[0]),e&&("!"===c.sortBy[1][0]?c.sortBy[1]=c.sortBy[1].substr(1):c.sortBy[1]="!"+c.sortBy[1]),n(a()),!1}),d3.json("assets/data/world.json",function(t,e){var n=d3.selectAll("svg");n.insert("path",".iglobe-graticule").datum({type:"Sphere"}).attr("class","iglobe-ocean"),s=topojson.feature(e,e.objects.countries).features,n.insert("g",".iglobe-foreground").attr("id","countries"),d3.selectAll("#countries").selectAll("path").data(s.filter(function(t){return"Point"!==t.geometry.type})).enter().append("path").attr("class","iglobe-countries").attr("id",function(t,e){return t.id}),n.insert("path",".iglobe-foreground").datum(topojson.feature(e,e.objects.cities)).attr("class","iglobe-cities").selectAll("LineString").attr("class","iglobe-route"),n.insert("g",".iglobe-cities").attr("id","routes"),d3.selectAll("#routes").selectAll("path").data(topojson.feature(e,e.objects.trips).features).enter().append("path").attr("id",function(t){return t.properties.name}).attr("class","iglobe-route").attr("visibility",function(t){return"trip"===c.filterKey&&t.properties.name==c.filterProp?(v.rotate(h(t.geometry.coordinates)),"visible"):"hidden"}),g.world()})}(),t(function(){function e(t){for(var e=document.getElementById("MenuList");e.firstChild;)e.removeChild(e.firstChild);var n=document.createDocumentFragment();r[t].forEach(function(t,e){var a=document.createElement("option");a.innerHTML=t.desc,a.value=t.id,n.appendChild(a)}),e.appendChild(n)}var n=t("body"),a=t("#header");t("#nav"),t("#wrapper");$menuList=t("#MenuList"),$navMenu=t("#navMenu"),$navTitle=t("#navTitle"),t("form").placeholder(),$navMenu.hide(),$menuList.css({visibility:"hidden",opacity:0}),skel.on("+medium -medium",function(){t.prioritize(".important\\28 medium\\29",skel.breakpoint("medium").active)}),t('<div id="titleBar"><a href="#header" class="toggle"></a><span class="title">'+t("#logo").html()+"</span></div>").appendTo(n),a.panel({delay:500,hideOnClick:!0,hideOnSwipe:!0,resetScroll:!0,resetForms:!0,side:"right",target:n,visibleClass:"header-visible"}),"wp"==skel.vars.os&&skel.vars.osVersion<10&&t("#titleBar, #header, #wrapper").css("transition","none");var r;t.getJSON("assets/data/menu.json",function(t){r=t}),t("#showMenu").click(function(){$navTitle.toggle("fast",function(){$navMenu.toggle()})}),t("#contactButton").click(function(){return t("#contactModal").modal({fadeDuration:500}),!1}),t.getJSON("assets/data/manifest.json",function(e){o=e.sort(i(c.sortBy)),t("#gallery").chromatic(o)}),t("input[name='galSelection']").change(function(){switch(t(this).attr("id")){case"galSelAll":$menuList.animate({opacity:0},1e3,function(){t(this).css("visibility","hidden")});break;case"galSelTrip":e("trips"),$menuList.css("visibility","visible").animate({opacity:1},1e3);break;case"galSelCountry":e("countries"),$menuList.css("visibility","visible").animate({opacity:1},1e3)}return!1}),t("#contactForm").submit(function(e){t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(e){t("#response").animate({opacity:0},500,function(){t(this).html(e)}).animate({opacity:1},500),~e.indexOf("Thanks")&&t("#contactForm")[0].reset()}}),e.preventDefault()})})}(jQuery);
!function(e){e.fn.navList=function(){var t=e(this);return $a=t.find("a"),b=[],$a.each(function(){var t=e(this),a=Math.max(0,t.parents("li").length-1),l=t.attr("href"),i=t.attr("target");b.push('<a class="link depth-'+a+'"'+("undefined"!=typeof i&&""!=i?' target="'+i+'"':"")+("undefined"!=typeof l&&""!=l?' href="'+l+'"':"")+'><span class="indent-'+a+'"></span>'+t.text()+"</a>")}),b.join("")},e.fn.panel=function(t){if(0==this.length)return i;if(this.length>1){for(var a=0;a<this.length;a++)e(this[a]).panel(t);return i}var l,i=e(this),n=e("body"),r=e(window),o=i.attr("id");return l=e.extend({delay:0,hideOnClick:!1,hideOnEscape:!1,hideOnSwipe:!1,resetScroll:!1,resetForms:!1,side:null,target:i,visibleClass:"visible"},t),"jQuery"!=typeof l.target&&(l.target=e(l.target)),i._hide=function(e){l.target.hasClass(l.visibleClass)&&(e&&(e.preventDefault(),e.stopPropagation()),l.target.removeClass(l.visibleClass),window.setTimeout(function(){l.resetScroll&&i.scrollTop(0),l.resetForms&&i.find("form").each(function(){this.reset()})},l.delay))},i.css("-ms-overflow-style","-ms-autohiding-scrollbar").css("-webkit-overflow-scrolling","touch"),l.hideOnClick&&(i.find("a").css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),i.on("click","a",function(t){var a=e(this),n=a.attr("href"),r=a.attr("target");n&&"#"!=n&&""!=n&&n!="#"+o&&(t.preventDefault(),t.stopPropagation(),i._hide(),window.setTimeout(function(){"_blank"==r?window.open(n):window.location.href=n},l.delay+10))})),i.on("touchstart",function(e){i.touchPosX=e.originalEvent.touches[0].pageX,i.touchPosY=e.originalEvent.touches[0].pageY}),i.on("touchmove",function(e){if(null!==i.touchPosX&&null!==i.touchPosY){var t=i.touchPosX-e.originalEvent.touches[0].pageX,a=i.touchPosY-e.originalEvent.touches[0].pageY,n=i.outerHeight(),r=i.get(0).scrollHeight-i.scrollTop();if(l.hideOnSwipe){var o=!1,s=20,c=50;switch(l.side){case"left":o=s>a&&a>-1*s&&t>c;break;case"right":o=s>a&&a>-1*s&&-1*c>t;break;case"top":o=s>t&&t>-1*s&&a>c;break;case"bottom":o=s>t&&t>-1*s&&-1*c>a}if(o)return i.touchPosX=null,i.touchPosY=null,i._hide(),!1}(i.scrollTop()<0&&0>a||r>n-2&&n+2>r&&a>0)&&(e.preventDefault(),e.stopPropagation())}}),i.on("click touchend touchstart touchmove",function(e){e.stopPropagation()}),i.on("click",'a[href="#'+o+'"]',function(e){e.preventDefault(),e.stopPropagation(),l.target.removeClass(l.visibleClass)}),n.on("click touchend",function(e){i._hide(e)}),n.on("click",'a[href="#'+o+'"]',function(e){e.preventDefault(),e.stopPropagation(),l.target.toggleClass(l.visibleClass)}),l.hideOnEscape&&r.on("keydown",function(e){27==e.keyCode&&i._hide(e)}),i},e.fn.placeholder=function(){if("undefined"!=typeof document.createElement("input").placeholder)return e(this);if(0==this.length)return a;if(this.length>1){for(var t=0;t<this.length;t++)e(this[t]).placeholder();return a}var a=e(this);return a.find("input[type=text],textarea").each(function(){var t=e(this);""!=t.val()&&t.val()!=t.attr("placeholder")||t.addClass("polyfill-placeholder").val(t.attr("placeholder"))}).on("blur",function(){var t=e(this);t.attr("name").match(/-polyfill-field$/)||""==t.val()&&t.addClass("polyfill-placeholder").val(t.attr("placeholder"))}).on("focus",function(){var t=e(this);t.attr("name").match(/-polyfill-field$/)||t.val()==t.attr("placeholder")&&t.removeClass("polyfill-placeholder").val("")}),a.find("input[type=password]").each(function(){var t=e(this),a=e(e("<div>").append(t.clone()).remove().html().replace(/type="password"/i,'type="text"').replace(/type=password/i,"type=text"));""!=t.attr("id")&&a.attr("id",t.attr("id")+"-polyfill-field"),""!=t.attr("name")&&a.attr("name",t.attr("name")+"-polyfill-field"),a.addClass("polyfill-placeholder").val(a.attr("placeholder")).insertAfter(t),""==t.val()?t.hide():a.hide(),t.on("blur",function(e){e.preventDefault();var a=t.parent().find("input[name="+t.attr("name")+"-polyfill-field]");""==t.val()&&(t.hide(),a.show())}),a.on("focus",function(e){e.preventDefault();var t=a.parent().find("input[name="+a.attr("name").replace("-polyfill-field","")+"]");a.hide(),t.show().focus()}).on("keypress",function(e){e.preventDefault(),a.val("")})}),a.on("submit",function(){a.find("input[type=text],input[type=password],textarea").each(function(t){var a=e(this);a.attr("name").match(/-polyfill-field$/)&&a.attr("name",""),a.val()==a.attr("placeholder")&&(a.removeClass("polyfill-placeholder"),a.val(""))})}).on("reset",function(t){t.preventDefault(),a.find("select").val(e("option:first").val()),a.find("input,textarea").each(function(){var t,a=e(this);switch(a.removeClass("polyfill-placeholder"),this.type){case"submit":case"reset":break;case"password":a.val(a.attr("defaultValue")),t=a.parent().find("input[name="+a.attr("name")+"-polyfill-field]"),""==a.val()?(a.hide(),t.show()):(a.show(),t.hide());break;case"checkbox":case"radio":a.attr("checked",a.attr("defaultValue"));break;case"text":case"textarea":a.val(a.attr("defaultValue")),""==a.val()&&(a.addClass("polyfill-placeholder"),a.val(a.attr("placeholder")));break;default:a.val(a.attr("defaultValue"))}})}),a},e.prioritize=function(t,a){var l="__prioritize";"jQuery"!=typeof t&&(t=e(t)),t.each(function(){var t,i=e(this),n=i.parent();if(0!=n.length)if(i.data(l)){if(a)return;t=i.data(l),i.insertAfter(t),i.removeData(l)}else{if(!a)return;if(t=i.prev(),0==t.length)return;i.prependTo(n),i.data(l,t)}})}}(jQuery);